<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„ä½GIé¤ç›˜</title>
    <style>
        /* å…¨å±€æ ·å¼ */
        body {
            font-family: 'å¾®è½¯é›…é»‘', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        /* æ ‡é¢˜æ ·å¼ */
        .header {
            text-align: center;
            margin: 20px 0;
            color: #4CAF50;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: fadeIn 1s ease-in;
        }

        /* æ“ä½œæç¤º */
        .instruction {
            text-align: center;
            color: #666;
            margin: 15px 0;
            font-size: 0.9em;
        }

        /* åˆ†ç±»å®¹å™¨ */
        .categories {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        /* é£Ÿç‰©åˆ†ç±»åŒºå— */
        .category {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        .category.carbs { border: 2px solid #E6B8AF; }
        .category.protein { border: 2px solid #9DC3E6; }
        .category.fiber { border: 2px solid #A9D18E; }
        .category.fruit { border: 2px solid #FFD966; }

        /* å¯æ‹–æ‹½é£Ÿç‰©é¡¹ */
        .food-item {
            background: #fff;
            border-radius: 8px;
            padding: 10px;
            margin: 8px 0;
            cursor: move;
            transition: transform 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .food-item:hover {
            transform: translateY(-3px);
        }

        /* åœ†å½¢é¤ç›˜ */
        #plate {
            width: 400px;
            height: 400px;
            background: #FFF3CD;
            border-radius: 50%;
            margin: 20px auto;
            padding: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        /* è¥å…»ç»Ÿè®¡ */
        .nutrition-summary {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 20px;
            text-align: center;
        }

        /* è¥å…»ä¿¡æ¯å¼¹çª— */
        .nutrition-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0,0,0,0.2);
            z-index: 1000;
            min-width: 200px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <h1 class="header">æˆ‘çš„ä½GIé¤ç›˜</h1>
    <div class="instruction">æç¤ºï¼šæ‹–æ”¾é£Ÿç‰©åˆ°é¤ç›˜ï¼ŒåŒå‡»é¤ç›˜ä¸­é£Ÿç‰©å¯æ”¾å›åŸå¤„</div>

    <div class="categories">
        <div class="category carbs">
            <h3>ç¢³æ°´åŒ–åˆç‰© <span class="category-tip">(åŒå‡»æ”¾å›)</span></h3>
            <div class="food-item" draggable="true" data-name="ç³™ç±³" data-category="carbs">ğŸš ç³™ç±³</div>
            <div class="food-item" draggable="true" data-name="å…¨éº¦é¢åŒ…" data-category="carbs">ğŸ å…¨éº¦é¢åŒ…</div>
        </div>
        
        <div class="category protein">
            <h3>è›‹ç™½è´¨ <span class="category-tip">(åŒå‡»æ”¾å›)</span></h3>
            <div class="food-item" draggable="true" data-name="é¸¡èƒ¸è‚‰" data-category="protein">ğŸ— é¸¡èƒ¸è‚‰</div>
            <div class="food-item" draggable="true" data-name="ä¸‰æ–‡é±¼" data-category="protein">ğŸŸ ä¸‰æ–‡é±¼</div>
        </div>
        
        <div class="category fiber">
            <h3>è†³é£Ÿçº¤ç»´ <span class="category-tip">(åŒå‡»æ”¾å›)</span></h3>
            <div class="food-item" draggable="true" data-name="è¥¿å…°èŠ±" data-category="fiber">ğŸ¥¦ è¥¿å…°èŠ±</div>
            <div class="food-item" draggable="true" data-name="è èœ" data-category="fiber">ğŸ¥¬ è èœ</div>
        </div>
        
        <div class="category fruit">
            <h3>æ°´æœ <span class="category-tip">(åŒå‡»æ”¾å›)</span></h3>
            <div class="food-item" draggable="true" data-name="è‹¹æœ" data-category="fruit">ğŸ è‹¹æœ</div>
            <div class="food-item" draggable="true" data-name="è“è“" data-category="fruit">ğŸ« è“è“</div>
        </div>
    </div>

    <div id="plate">
        <div class="nutrition-summary">
            <p>æ€»çƒ­é‡ï¼š<span id="totalCalories">0</span> kcal</p>
            <p>å¹³å‡GIå€¼ï¼š<span id="averageGI">0</span></p>
        </div>
    </div>

    <div id="nutritionModal" class="nutrition-modal">
        <h3 id="foodName"></h3>
        <p>æ¨èåˆ†é‡ï¼š<span id="servingSize"></span></p>
        <p>çƒ­é‡ï¼š<span id="calories"></span> kcal</p>
        <p>GIå€¼ï¼š<span id="giValue"></span></p>
        <button onclick="closeModal()" style="margin-top: 15px; padding: 8px 20px;">å…³é—­</button>
    </div>

    <script>
        // è¥å…»æ•°æ®åº“
        const nutritionData = {
            'ç³™ç±³': { category: 'carbs', serving: '1ç¢—(150g)', calories: 165, gi: 55 },
            'å…¨éº¦é¢åŒ…': { category: 'carbs', serving: '2ç‰‡(80g)', calories: 140, gi: 45 },
            'é¸¡èƒ¸è‚‰': { category: 'protein', serving: '150g', calories: 165, gi: 0 },
            'ä¸‰æ–‡é±¼': { category: 'protein', serving: '120g', calories: 240, gi: 0 },
            'è¥¿å…°èŠ±': { category: 'fiber', serving: '1ç¢—(90g)', calories: 35, gi: 15 },
            'è èœ': { category: 'fiber', serving: '1ç¢—(100g)', calories: 23, gi: 15 },
            'è‹¹æœ': { category: 'fruit', serving: '1ä¸ª(150g)', calories: 78, gi: 36 },
            'è“è“': { category: 'fruit', serving: '1æ¯(150g)', calories: 85, gi: 34 }
        };

        // æ‹–æ”¾åŠŸèƒ½
        document.addEventListener('dragstart', e => {
            if (e.target.classList.contains('food-item')) {
                e.dataTransfer.setData('text/plain', e.target.dataset.name);
            }
        });

        document.addEventListener('dragover', e => e.preventDefault());

        document.addEventListener('drop', e => {
            e.preventDefault();
            if (e.target.id === 'plate') {
                const foodName = e.dataTransfer.getData('text/plain');
                const newFood = createFoodItem(foodName);
                e.target.appendChild(newFood);
                updateNutritionSummary();
            }
        });

        // åŒå‡»æ”¾å›åŠŸèƒ½
        document.addEventListener('dblclick', e => {
            if (e.target.classList.contains('food-item') && e.target.parentElement.id === 'plate') {
                const foodName = e.target.textContent;
                const category = nutritionData[foodName].category;
                const originalCategory = document.querySelector(`.category.${category}`);
                
                // åˆ›å»ºæ–°çš„å¯æ‹–æ‹½é£Ÿç‰©é¡¹
                const newItem = createFoodItem(foodName);
                newItem.draggable = true;
                
                // æ·»åŠ å›åŸåˆ†ç±»
                originalCategory.appendChild(newItem);
                
                // ç§»é™¤é¤ç›˜ä¸­é£Ÿç‰©
                e.target.remove();
                updateNutritionSummary();
            }
        });

        // åˆ›å»ºé£Ÿç‰©å…ƒç´ 
        function createFoodItem(name) {
            const food = document.createElement('div');
            food.className = 'food-item';
            food.textContent = name;
            food.dataset.name = name;
            food.dataset.calories = nutritionData[name].calories;
            food.dataset.gi = nutritionData[name].gi;
            food.dataset.category = nutritionData[name].category;
            food.onclick = showNutrition;
            return food;
        }

        // æ›´æ–°è¥å…»ç»Ÿè®¡
        function updateNutritionSummary() {
            const foods = document.querySelectorAll('#plate .food-item');
            let totalCalories = 0, totalGI = 0, giCount = 0;
            
            foods.forEach(food => {
                totalCalories += parseInt(food.dataset.calories);
                const gi = parseInt(food.dataset.gi);
                if(gi > 0) {
                    totalGI += gi;
                    giCount++;
                }
            });

            document.getElementById('totalCalories').textContent = totalCalories;
            document.getElementById('averageGI').textContent = 
                giCount > 0 ? (totalGI / giCount).toFixed(1) : 0;
        }

        // æ˜¾ç¤ºè¥å…»è¯¦æƒ…
        function showNutrition() {
            const foodName = this.textContent;
            const modal = document.getElementById('nutritionModal');
            const data = nutritionData[foodName];
            
            document.getElementById('foodName').textContent = foodName;
            document.getElementById('servingSize').textContent = data.serving;
            document.getElementById('calories').textContent = data.calories;
            document.getElementById('giValue').textContent = data.gi || '-';
            modal.style.display = 'block';
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('nutritionModal').style.display = 'none';
        }
    </script>
</body>
</html>